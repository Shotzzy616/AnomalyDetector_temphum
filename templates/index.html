<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Real-Time Weather Data</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
</head>
<body>
    <div class="container mt-5">
        <h1>Real-Time Weather Data</h1>
        <div id="weather-data" class="alert alert-info">
            <strong>Loading...</strong>
        </div>
    </div>

    <script>
        function fetchWeatherData() {
            $.ajax({
                url: '/latest_data',
                method: 'GET',
                success: function(data) {
                    const time = data.Timestamp;
                    const temperature = data['Temperature (°C)'];
                    const humidity = data['Humidity (%)'];
                    const prediction = data.Prediction;

                    $('#weather-data').html(`
                        <strong>Timestamp:</strong> ${time}<br>
                        <strong>Temperature:</strong> ${temperature} °C<br>
                        <strong>Humidity:</strong> ${humidity} %<br>
                        <strong>Prediction:</strong> ${prediction == 1 ? 'Normal' : 'Anomaly'}
                    `);
                },
                error: function() {
                    $('#weather-data').html('<strong>Error fetching data.</strong>');
                }
            });
        }

        // Fetch data every 5 seconds
        setInterval(fetchWeatherData, 5000);
        // Initial fetch
        fetchWeatherData();
    </script>
</body>
</html>
